<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="./_assets/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="./_assets/main.css" rel="stylesheet" type="text/css">
    <script src="./_assets/sorttable.min.js" type="text/javascript"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>

  <body role="document">
    <nav class="navbar navbar-inverse navbar-fixed-top">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>


        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li class="active"><a href="./book-list.html">Book List</a></li>
            <li><a href="./about.html">About</a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </nav>

    <div class="container-fluid theme-showcase body-container" role="main">

      <div class="well col-lg-6 col-lg-offset-3 col-md-8 col-md-offset-2" style="margin-top:90px">
        <div style="margin-bottom:8px">
          <b>Usage:</b> Ensure all books are in the format <b>&lt;AUTHOR(S)&gt; - &lt;TILE&gt;</b>
        </div>
        <div style="margin-bottom:8px">
          It is important that the author come before the title and that the seperator be exactly " - "
        </div>
        <div style="margin-bottom:8px">
          The <b>" - "</b> seperator may occur again in the title (for example to seperate a title and its subtext, but may not occur in the author string. Note that a hyphen is okay when not bracketed by spaces on either side)
        </div>
        <div style="margin-bottom:8px">
          It is expected that all files have extensions. Files with multiple formats must have exactly the same name. Currently sub directories are not searched
        </div>
      </div>
    
      <div style="width:100%; margin-top:100px">
      <table id="results" class="table table-striped table-bordered sortable scalable_table" data-sortable>
        <thead>
          <tr id="table-header">
            <th class="sorttable_alpha">Title</th>
            <th class="sorttable_alpha">Author</th>
            <th>Download As</th>
          </tr>
        </thead>

        <tbody>
        {% for book in books %}
          {% assign offset = book[0] | split:' - ' | first | size | plus: 3 %}
          <tr>
            <td>{{ book[0] | slice: offset, 99 | escape }}</td>
            {% assign author = book[0] | escape | split:' - ' | first %}
            <td>{{ author  }}</td>
            <td>
              {% for format in book[1] %}
              <span style="margin-left:6px; margin-right:6px">
                <a href="{{ books_dir }}/{{ book[0] }}.{{ format }}">
                  {{format}}
                </a>
              </span>
              {% endfor %}
            </td>
          </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>

    </div>
  </body>
</html>
